<template name="test">
	<div id="test-index">{{testCount}} / {{getLength Testing}}</div>
	<div id="test-score">{{points CurrentTestItem._id}}</div>
	<div id="test-exit">
		{{#if language}}
		<a href="{{pathFor 'language' username=username language=language}}"><i class="fa fa-times"></i></a>
		{{else}}
		<a href="{{pathFor 'dashboard' username=username}}"><i class="fa fa-times"></i></a>
		{{/if}}
	</div>
	<div class="reveal">
	    <div class="slides">
			{{#each $.Session.get 'Testing'}}
				<section class="{{#if $.Session.equals 'correct' true}}correct{{/if}}{{#if $.Session.equals 'correct' false}}incorrect{{/if}}">
					<section>
						{{> testPrompt }}
						{{> testInput}}
					</section>
					<section>
						{{> testPrompt }}
						{{> testMultipleChoice}}
					</section>
					<section>
						{{> testCard}}
						<p class="text-center">
							<a class="accept-incorrect">Next</a>
						</p>
					</section>
				</section>
			{{/each}}
			<section class="test-end">
				<h3>End of test</h3>
				<table>
						<tbody>
						{{#each $.Session.get 'Testing'}}
							<tr>
								<td>{{target}}</td>
								<td>{{transliteration}}</td>
								<td>{{source}}</td>
								<td>{{lastPoints _id}}</td>
							</tr>
						{{/each}}
						</tbody>
					</table>
				<p><a id="test-home" href="{{pathFor 'dashboard' username=username}}">Go home</a></p>
			</section>			
	    </div>
	</div>
</template>


<template name="testCard">
	<h1>{{source}}</h1>
	<h2>{{transliteration}}</h2>
	<h1>{{target}}</h1>
</template>

<template name="testButton">
	{{#if Testing}}
	<a class="{{class}} test-button" data-toggle="modal" href='#test-modal'>Test</a>
	{{/if}}
</template>

<template name="testPrompt">
	<h1 class="question {{#if $.Session.equals 'correct' true}}text-success{{/if}}{{#if $.Session.equals 'correct' false}}text-danger{{/if}}">
	{{#if $eq promptType 'voice'}}
		<i class="fa fa-volume-up fa-5x speak-prompt"></i>
	{{else}}
		{{#if $eq prompt 'target'}}
			{{target}}
		{{else}}
			{{source}}
		{{/if}}
	{{/if}}
	</h1>
</template>

<template name="testInput">
	<input type="text" name="source" class="form-control test-input session-set" key="test_input" placeholder="{{#if $eq prompt 'target'}}Type the English{{else}}Type the {{Language.name}}{{/if}}">
   <div class="test-buttons">
   			<a class="test-input-skip">
   				{{#if $.Session.get 'test_input'}}
   				Submit
   				{{else}}
   				Skip
   				{{/if}}
   			</a>
   	</div>
</template>

<template name="testMultipleChoice">
	<p class="text-center">
		{{#each $.Session.get 'Multiples'}}
			<button class="btn btn-default btn-lg test-multiple-answer" value="{{#if $.Session.equals 'prompt' 'target'}}{{source}}{{else}}{{target}}{{/if}}">
			{{#if $.Session.equals 'prompt' 'target'}}
			{{source}}
			{{else}}
			{{target}}
			{{/if}}
			</button>
		{{/each}}
	</p>
</template>